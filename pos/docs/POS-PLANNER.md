# 夯肉 HANGROU - iPad POS 點餐系統開發規劃

## 專案概述

### 專案資訊
- **專案名稱**：夯肉 HANGROU iPad POS 系統
- **設備平台**：iPad 9 (10.2吋，2021年及後續機型) - 使用 Safari 瀏覽器
- **技術堆疊**：Vue 3 + TypeScript
- **業務類型**：日式炭火燒烤夜市攤位
- **開發時間**：預計開發週期 10-12 週
- **目標使用者**：店內工作人員
- **Phase 1 範圍**：本地資料庫、現金付款、基礎功能、Web 版

### 專案目標
開發一款專為夜市燒烤攝位設計的 iPad POS 點餐系統，簡化點餐、結帳、出單流程，提供銷售資料分析功能，提升營運效率。

**Phase 1 目標**：完成 Web 版本，可在 iPad Safari 瀏覽器上使用。

### Phase 1 特色
- ✅ **Vue 3 開發**：學習曲線平緩，開發效率高
- ✅ **Web 優先**：在 iPad Safari 瀏覽器上運作
- ✅ **完全本地運作**：使用 IndexedDB 本地資料庫，不需網路連線
- ✅ **簡化付款流程**：Phase 1 專注於現金付款，快速上手
- ✅ **核心功能優先**：點餐、結帳、列印、統計四大核心功能
- ✅ **成本優化**：無需資料庫費用、無需 App 上架費用
- ✅ **易於擴展**：未來可打包為 App 或逐步增加電子付款、會員系統等功能

---

## 核心功能需求

### 1. 點餐系統 (Order Taking)

#### 1.1 選單展示
- **網格化選單佈局**：類似 dudoo 系統，大圖示卡片展示
- **分類管理**：
  - 🐔 雞肉類
  - 🐂 牛肉類
  - 🐖 豬肉類
  - 🥬 蔬菜類
  - 🍢 經典串燒
  - 🍺 飲料類
  - 🍚 主食/配菜
- **菜品資訊顯示**：圖片、名稱、價格（NT$）
- **快速篩選**：支援按分類、價格、熱銷快速篩選

#### 1.2 點餐操作
- **點擊加單**：點擊菜品卡片新增到訂單
- **數量調整**：
  - 點擊 + / - 按鈕調整數量
  - 支援直接輸入數量
  - 支援長按快速增加
- **規格選擇**：
  - 辣度：不辣、微辣、中辣、特辣
  - 備註：少冰、去冰、加蔥等自訂備註
- **購物車/訂單列表**：
  - 即時顯示已點菜品
  - 顯示小計金額
  - 支援刪除/修改訂單項
  - 支援清空訂單

#### 1.3 特殊功能
- **折扣優惠**：
  - **單一品項折扣**：買幾串折多少（例如：烤香菇買3串折$5）
  - **分類折扣**：同分類商品達到數量後折扣（例如：買3串任何雞肉品項折$5）
  - **總數量折扣**：購物車總數達到數量後折扣（例如：滿5串任何品項折$20）
  - 可在設定畫面靈活配置所有折扣類型
  - 自動計算折扣金額
  - 支援多個折扣規則同時套用
  - 購物車即時顯示折扣金額
  - 結帳時明確列出折扣明細
- **套餐組合**：支援建立套餐（例如：燒肉拼盤）（未來擴展）
- **加購推薦**：點餐時顯示推薦搭配菜品（未來擴展）

---

### 2. 結帳系統 (Checkout)

#### 2.1 付款方式（Phase 1 以現金為主）
- **現金付款**：
  - 輸入實收金額（僅允許輸入數字）
  - 自動計算找零
  - 支援快速金額按鈕：
    - **累加模式**：$100, $500, $1000 按鈕可累加金額
    - **收全額**：一鍵填入應收總額
    - **歸零**：清除輸入金額

**未來擴展選項**（Phase 2）：
- LINE Pay
- 街口支付
- 悠遊卡/一卡通
- 信用卡讀卡機整合

#### 2.2 結帳流程
```
點餐完成 → 確認訂單 → 輸入實收金額 → 完成付款 → 自動列印廚房單/小票
```

**收款操作說明**：
1. **手動輸入**：直接輸入實收金額（僅允許數字）
2. **累加模式**：點擊 $100/$500/$1000 按鈕累加金額
3. **收全額**：點擊「💰 收全額」按鈕自動填入總額
4. **歸零**：點擊「🗹️ 歸零」按鈕清除金額重新輸入

**流程說明**：
1. **點餐完成**：客戶選擇完所有菜品
2. **確認訂單**：檢查訂單內容（品項、數量、金額）
3. **輸入實收金額**：輸入客戶支付的現金金額
4. **完成付款**：系統顯示找零金額，點擊確認付款
5. **自動列印**：
   - 廚房單 → 廚房列印機（1 台）
   - 小票 → 櫃台列印機（1 台）
6. **自動清空訂單**：準備下一筆訂單

---

### 3. 出單系統 (Printing)

#### 3.1 列印機類型
- **廚房列印機**：
  - 熱感式列印機（58mm 或 80mm）
  - 支援網路列印機（Wi-Fi/Ethernet）
  - 支援藍牙列印機
- **櫃台小票機**：
  - 58mm 或 80mm 熱感式列印機
  - 列印客戶小票

#### 3.2 列印內容
**廚房單（KDS Order Ticket）**：
- 訂單號
- 時間戳
- 桌號/訂單類型
- 菜品清單（按類別分組）
- 數量
- 特殊要求（辣度、備註）
- 製作優先級

**客戶小票**：
- 店铺資訊（Logo、名稱、地址、電話）
- 訂單號、日期時間
- 菜品明細（名稱、數量、單價、小計）
- 總金額、實付金額
- 付款方式
- 聯絡電話
- 感謝語

#### 3.3 自動列印規則
- **立即列印模式**：結帳後自動列印
  - 廚房單 → 廚房列印機（1 台）
  - 客戶小票 → 櫃台列印機（1 台）
- **列印份數**：支援設定列印份數（預設 1 份）

#### 3.4 KDS (Kitchen Display System) 選用功能
- 數位化廚房顯示系統取代傳統列印
- 即時顯示訂單佇列
- 訂單狀態管理（待處理、製作中、已完成）
- 顏色標識緊急程度
- 聲音提示新訂單

---

### 4. 銷售統計 (Sales Analytics)

#### 4.1 即時統計
- **今日營業額**：即時顯示當日總營收
- **訂單數量**：已完成訂單總數
- **平均客單價**：總營業額 / 訂單數
- **時段分析**：每小時/每時段營業額熱力圖

#### 4.2 銷售報表
**日報表**：
- 原價營業額（未折扣）
- 今日總折扣金額
- 今日利潤（原價 - 折扣）
- 訂單數統計
- 各分類銷售占比
- 熱銷商品 TOP 10（顯示排名、品項、數量、營業額）
- **折扣明細**：顯示每個折扣規則的使用次數和總折扣金額
- 每小時營業額分析

**週報表**：
- 7天營業額趨勢圖
- 同比上週成長
- 客流量分析
- 峰值時段識別

**月報表**：
- 月度營收總覽
- 月度銷售趨勢
- 商品銷售排行榜
- 客戶消費習慣分析

**自訂報表**：
- 選擇日期範圍
- 選擇分類/單品
- 匯出 Excel/CSV/PDF

#### 4.3 資料視覺化
- **圖表類型**：
  - 折線圖（趨勢）
  - 長條圖（對比）
  - 圓餅圖（占比）
  - 熱力圖（時段分布）
- **互動式圖表**：支援點擊查看詳情

#### 4.4 庫存管理（進階功能）
- **庫存預警**：低於設定數量時提醒
- **庫存盤點**：定期盤點功能
- **損耗記錄**：記錄損耗情況
- **銷售 vs 庫存分析**

---

## UI/UX 設計參考

### 設計風格（參考 dudoo 系統）

#### 配色方案
```css
/* 主色調 - 保持與夯肉品牌一致 */
--primary-color: #FF6B35;      /* 活力橙紅 */
--secondary-color: #FF8C42;    /* 溫暖橙色 */
--accent-color: #2D3436;       /* 深灰黑 */

/* 功能色彩 */
--success-color: #00B894;      /* 成功/完成 */
--warning-color: #FDCB6E;      /* 警告/待處理 */
--danger-color: #D63031;       /* 錯誤/刪除 */
--info-color: #0984E3;         /* 資訊 */

/* 中性色 */
--bg-primary: #FFFFFF;         /* 主背景 */
--bg-secondary: #F8F9FA;       /* 次級背景 */
--text-primary: #2D3436;       /* 主文字 */
--text-secondary: #636E72;     /* 次要文字 */
--border-color: #DFE6E9;       /* 邊框 */
```

#### 字型系統
- **中文**：Noto Sans TC（Google Fonts）
- **數字**：Roboto（清晰易讀）
- **字級**：
  - 大標題：24-28px
  - 標題：18-20px
  - 本文：16px
  - 說明：14px
  - 輔助：12px

### iPad 介面佈局

#### 主畫面 (10.2 吋 2166 x 1620 像素)
```
┌─────────────────────────────────────────────────────────┐
│  夯肉 HANGROU                    [設定] [報表] [登出]  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  [🐔全部] [🐂牛肉] [🐖豬肉] [🥬蔬菜] [🍢串燒] [🍺飲料]  │
│                                                         │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐      │
│  │  圖片   │ │  圖片   │ │  圖片   │ │  圖片   │      │
│  │ 雞肉串  │ │ 牛五花  │ │ 豬肋排  │ │ 烤玉米  │      │
│  │  $50   │ │  $120   │ │  $80   │ │  $40   │      │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘      │
│                                                         │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐      │
│  │  圖片   │ │  圖片   │ │  圖片   │ │  圖片   │      │
│  │ ...     │ │ ...     │ │ ...     │ │ ...     │      │
│  │  $XX   │ │  $XX   │ │  $XX   │ │  $XX   │      │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘      │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  目前訂單                               [結帳] [清空]  │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 雞肉串          x2     $100   [刪除]            │  │
│  │ 牛五花          x1     $120   [刪除]            │  │
│  │ 烤玉米          x1     $40    [刪除]            │  │
│  ├─────────────────────────────────────────────────┤  │
│  │ 總計：          4件    $260                    │  │
│  └─────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

#### 結帳介面
```
┌─────────────────────────────────────────────────────────┐
│  ← 返回                     結帳付款                     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  訂單號：#20260126-001                                   │
│  時間：2026-01-26 19:35                                 │
│                                                         │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 雞肉串          x2     $100                     │  │
│  │ 牛五花          x1     $120                     │  │
│  │ 烤玉米          x1     $40                      │  │
│  ├─────────────────────────────────────────────────┤  │
│  │ 總計：                $260                     │  │
│  └─────────────────────────────────────────────────┘  │
│                                                         │
│  付款方式：💵 現金                                       │
│                                                         │
│  實收金額：$ [________]                                 │
│  找零：$740                                             │
│                                                         │
│         [取消]              [確認付款]                 │
└─────────────────────────────────────────────────────────┘
```

#### 報表介面
```
┌─────────────────────────────────────────────────────────┐
│  ← 返回                     銷售報表                     │
├─────────────────────────────────────────────────────────┤
│  [今日] [本週] [本月] [自訂]                            │
│                                                         │
│  今日營業額                         ██████████  $8,560 │
│  訂單數：42 單                                            │
│  平均客單價：$204                                         │
│                                                         │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 時段分布                            │  │
│  │ 17:00-18:00  ████ $800                           │  │
│  │ 18:00-19:00  ████████ $2,100                     │  │
│  │ 19:00-20:00  ████████████ $3,200                 │  │
│  │ 20:00-21:00  ██████████ $1,800                   │  │
│  │ 21:00-22:00  ████ $660                           │  │
│  └─────────────────────────────────────────────────┘  │
│                                                         │
│  熱銷 TOP 5：                                           │
│  1. 牛五花     25 份   $3,000                          │
│  2. 雞肉串     20 份   $1,000                          │
│  3. 豬肋排     15 份   $1,200                          │
│  4. 烤玉米     12 份   $480                            │
│  5. 培根捲     10 份   $500                            │
└─────────────────────────────────────────────────────────┘
```

### 互動設計原則

1. **大按鈕設計**：適合觸控操作，最小點擊區域 44x44 pt
2. **視覺回饋**：點擊時提供即時的視覺或觸覺回饋
3. **層次分明**：使用卡片、陰影、顏色區分不同區域
4. **操作簡化**：減少點擊次數，常用功能一鍵觸達
5. **資訊密度適中**：避免過度擁擠，保持介面清晰
6. **觸控優化**：
   - 禁止雙指縮放和雙擊放大
   - 防止誤觸導致畫面縮放
   - 僅允許單指點擊和滾動操作
   - 輸入框仍可正常選取文字

---

## 技術架構

### 技術堆疊

```javascript
{
  // 前端框架
  "framework": "Vue 3",
  "language": "TypeScript",

  // 開發工具
  "buildTool": "Vite 5",

  // 狀態管理
  "stateManagement": "Pinia",

  // UI 組件庫
  "uiLibrary": "Vant 4",

  // 本地資料庫
  "database": "IndexedDB",
  "dbWrapper": "Dexie.js",

  // 列印功能
  "printing": "ESC/POS 協定",
  "printerConnection": "Wi-Fi / Ethernet",

  // 部署
  "deployment": "Vercel / Netlify / 靜態託管"
}
```

### Vue 3 的優勢

**開發體驗**：
- ✅ 學習曲線平緩，語法直觀易學
- ✅ Composition API 強大且靈活
- ✅ 單文件組件（SFC）開發體驗佳
- ✅ 中文文檔和社區資源豐富

**技術優勢**：
- ✅ 完整的 TypeScript 支援
- ✅ 優秀的生態系統（Vant、Pinia、VueUse）
- ✅ 效能優異，體積更小
- ✅ Vite 建構速度極快

**適合 POS 系統**：
- ✅ 表單處理簡潔（付款、數量輸入）
- ✅ 雙向綁定方便（購物車即時更新）
- ✅ 移動端組件完善（Vant UI）

### 方案優勢

**開發優勢**：
- 開發快速，成本最低
- 完全離線運作，不需網路
- 無需額外資料庫費用
- 無需伺服器維護

**營運優勢**：
- 資料完全自主控制
- 適合單機使用
- Web 版無需 App 審核
- 更新部署快速

**注意事項**：
- 資料僅存在本地，需手動備份
- 無法多設備即時同步
- 資料丟失風險較高（需定期備份）
- Web 版僅支援網路列印機（不支援 USB 列印機）

### 資料結構設計（IndexedDB）

**選單分類**
```javascript
{
  id: "category_chicken",
  name: "雞肉",
  icon: "🐔",
  sortOrder: 1,
  active: true,
  createdAt: "2026-01-26T10:00:00Z",
  updatedAt: "2026-01-26T10:00:00Z"
}
```

**菜品**
```javascript
{
  id: "item_chicken_skewer",
  categoryId: "category_chicken",
  name: "雞肉串",
  description: "新鮮雞腿肉醃製",
  price: 50,
  image: "images/menu/chicken-skewer.jpg",
  options: {
    spicy: ["不辣", "微辣", "中辣", "特辣"],
    custom: ["加蔥", "去蔥", "多醬"]
  },
  active: true,
  createdAt: "2026-01-26T10:00:00Z",
  updatedAt: "2026-01-26T10:00:00Z"
}
```

**折扣規則**
```javascript
{
  id: 1,
  type: "item",            // 折扣類型: "item" | "category" | "total"

  // 單一品項折扣 (type: "item")
  itemId: "item_mushroom",
  itemName: "烤香菇",

  // 分類折扣 (type: "category")
  categoryId: "category_chicken",

  quantity: 3,              // 購買數量
  discountAmount: 5,        // 折扣金額
  active: true,
  createdAt: "2026-01-26T10:00:00Z",
  updatedAt: "2026-01-26T10:00:00Z"
}
```

**說明**：
- **type**：折扣類型
  - `"item"`：單一品項折扣（例如：烤香菇買3串折$5）
  - `"category"`：分類折扣（例如：買3串任何雞肉品項折$5）
  - `"total"`：總數量折扣（例如：購物車滿5串任何品項折$20）
- **itemId**：單一品項折扣時使用的品項 ID
- **categoryId**：分類折扣時使用的分類 ID
- **quantity**：需達到的購買數量
- **discountAmount**：折扣金額（新台幣）
- 系統會自動計算可套用幾次折扣
- 支援多個折扣規則同時套用

**訂單**
```javascript
{
  id: "order_20260126_001",
  orderNumber: "001", // 當日訂單序號
  items: [
    {
      itemId: "item_chicken_skewer",
      name: "雞肉串",
      quantity: 2,
      price: 50,
      options: {
        spicy: "中辣",
        custom: "加蔥"
      }
    }
  ],
  subtotal: 260,              // 原價小計
  discount: 0,                // ✅ 新增：折扣金額
  total: 260,                 // 實收金額（subtotal - discount）
  paymentMethod: "cash",
  receivedAmount: 1000,
  changeAmount: 740,
  orderStatus: "completed",
  createdAt: "2026-01-26T11:35:00Z",
  completedAt: "2026-01-26T11:36:00Z"
}
```

**銷售統計（每日彙總）**
```javascript
{
  date: "2026-01-26",
  totalRevenue: 9000,        // 原價營業額（未折扣）
  totalDiscount: 440,        // 總折扣金額
  orderCount: 42,
  paymentMethods: {
    "cash": 8560
  },
  hourlyData: {
    "17": 800,
    "18": 2100,
    "19": 3200,
    "20": 1800,
    "21": 660
  },
  itemSales: {
    "item_beef": {
      name: "牛五花",
      quantity: 25,
      revenue: 3000,          // 原價營業額
      discount: 150           // 該品項的折扣金額
    }
  },
  categorySales: {
    "beef": 3500,
    "pork": 2100,
    "chicken": 1800,
    "vegetable": 1160
  },
  createdAt: "2026-01-26T23:59:59Z"
}
```

**說明**：
- `totalRevenue`：原價營業額（未折扣前的總額）
- `totalDiscount`：當日所有折扣的總金額
- 利潤計算：`totalRevenue - totalDiscount = 實收金額`
- `itemSales`：每個品項包含原價營業額和折扣金額（用於後台計算）
- `hourlyData`：記錄每小時的原價營業額

**折扣明細顯示**：
- 根據 `discountRules` 和訂單記錄計算每個折扣規則的使用次數
- 顯示每個折扣規則的總折扣金額
- 支援三種折扣類型明細：
  - 單一品項折扣：顯示品項名稱
  - 分類折扣：顯示分類名稱
  - 總數量折扣：顯示「全館」

### IndexedDB 資料庫設計

```javascript
// 資料庫名稱：HangroPOSDB
// 版本：1

const DB_STRUCTURE = {
  name: 'HangroPOSDB',
  version: 1,
  stores: [
    {
      name: 'categories',      // 分類
      keyPath: 'id',
      indexes: ['sortOrder', 'active']
    },
    {
      name: 'items',           // 菜品
      keyPath: 'id',
      indexes: ['categoryId', 'active', 'price']
    },
    {
      name: 'orders',          // 訂單
      keyPath: 'id',
      indexes: ['createdAt', 'orderStatus', 'date']
    },
    {
      name: 'dailyStats',      // 每日統計
      keyPath: 'date',
      indexes: ['createdAt']
    },
    {
      name: 'discountRules',   // 折扣規則
      keyPath: 'id',
      indexes: ['type', 'itemId', 'categoryId', 'active']
    },
    {
      name: 'settings',        // 系統設定
      keyPath: 'key'
    }
  ]
};
```

### 列印機整合

#### ESC/POS 列印協定
```javascript
// 範例：列印廚房單
const printKitchenTicket = async (order, printerIp) => {
  const receipt = `
    =================================
    夯肉 HANGROU - 廚房單
    =================================
    訂單號：${order.id}
    時間：${order.createdAt}
    ---------------------------------
  `;

  order.items.forEach(item => {
    receipt += `${item.name} x${item.quantity}\n`;
    if (item.options) {
      receipt += `  備註：${Object.values(item.options).join(', ')}\n`;
    }
  });

  receipt += `
    =================================
  `;

  // 發送到網路列印機
  await sendToPrinter(printerIp, 9100, receipt);
};
```

#### 支援的列印機型號
- **Epson TM-m30 / TM-m30II**（推薦，支援 Wi-Fi/Ethernet）
- **Star Micronics mC-Print3**
- **XPrinter XP-Q800F**
- **Goojprt 58mm/80mm 熱感式列印機**

---

## 未來擴展方案（Phase 2）

### App 打包選項

#### 選項 A：Capacitor 打包為原生 App

**優勢**：
- ✅ 跨平台（iOS + Android）
- ✅ 原生功能完整（USB 列印機、檔案系統、本地通知）
- ✅ 更接近原生體驗
- ✅ 可上架 App Store

**所需額外成本**：
- Apple Developer 帳號：NT$3,500/年
- Mac 電腦（如沒有）：NT$30,000 起
- 開發時間：+3-4 天

#### 選項 B：PWA（漸進式 Web App）

**優勢**：
- ✅ 可安裝到 iPad 主畫面
- ✅ 離線功能更完善
- ✅ 無需 App Store 審核
- ✅ 無需額外成本

**限制**：
- 無法使用 USB 列印機
- 無法使用部分原生功能
- Safari 限制較多

---

## 開發計畫

### 第一階段：需求確認與設計（1-2 週）

#### Week 1
- [ ] 確認詳細功能需求
- [ ] 繪製 UI 原型圖（Figma/Sketch）
- [ ] 確認列印機型號和採購
- [ ] 設計資料庫結構
- [ ] 制定開發規範

#### Week 2
- [ ] UI/UX 詳細設計
- [ ] 建立設計系統文件
- [ ] 準備測試資料
- [ ] 建構開發環境（Vue 3 + Vite）
- [ ] 確認技術堆疊
- [ ] 初始化 Vue 3 專案
- [ ] 安裝依賴套件（Vant、Pinia、Dexie）

### 第二階段：核心功能開發（4-5 週）

#### Week 3-4：基礎功能
- [ ] 專案初始化（Vue 3 + Vite）
- [ ] 資料庫初始化（IndexedDB）
- [ ] 基礎 UI 框架建構
- [ ] 選單分類和菜品展示
- [ ] 點餐功能（新增、修改、刪除）
- [ ] 購物車/訂單列表

#### Week 5-6：結帳與列印
- [ ] 結帳介面開發
- [ ] 付款方式選擇
- [ ] 現金付款計算
- [ ] 列印機整合（ESC/POS）
- [ ] 小票模板設計
- [ ] 自動列印功能

### 第三階段：統計與管理功能（2-3 週）

#### Week 7-8
- [ ] 銷售資料收集
- [ ] 即時統計展示
- [ ] 日報表開發
- [ ] 週報表開發
- [ ] 月報表開發
- [ ] 資料視覺化圖表

#### Week 9
- [ ] 商品管理（增刪改查）
- [ ] 分類管理
- [ ] 系統設定
- [ ] 資料備份與還原功能
- [ ] Web 版部署測試

### 第四階段：測試與優化（1-2 週）

#### Week 10-11
- [ ] 功能測試
- [ ] 列印機測試（網路列印機）
- [ ] 效能優化
- [ ] 使用者體驗優化
- [ ] iPad Safari 瀏覽器測試
- [ ] Bug 修復
- [ ] 真實環境測試

### 第五階段：部署與培訓（1 週）

#### Week 12
- [ ] 生產環境部署（Vercel）
- [ ] 初始化資料庫（選單資料）
- [ ] 列印機設定與測試
- [ ] 員工培訓
- [ ] 操作手冊編寫
- [ ] 資料備份機制設定
- [ ] 上線準備

---

## 硬體需求

### 必備硬體

#### iPad 設備
- **型號**：iPad 9 (10.2吋，2021)
- **儲存**：至少 64GB
- **網路**：Wi-Fi（可選 Cellular，用於備用網路）
- **數量**：1 台（櫃檯點餐使用）

#### 列印機
**廚房列印機（58mm 熱感式）**：
- 型號：Epson TM-m30II 或 XPrinter XP-Q800F
- 連接：Wi-Fi / Ethernet
- 數量：1 台

**櫃檯小票機（58mm/80mm 熱感式）**：
- 型號：同上或獨立設備
- 數量：1 台

**總計**：2 台列印機（廚房 1 台 + 櫃檯 1 台）

#### 網路設備
- **路由器**：支援 5GHz Wi-Fi 6
- **網路交換器**（如使用有線列印機）
- **UPS 不斷電系統**：防止突然斷電

### 選用硬體

- **iPad 支架**：桌面固定支架
- **觸控筆**：便於操作（Apple Pencil 或第三方）
- **掃描槍**：用於會員卡掃描（未來擴展）
- **讀卡機**：信用卡/悠遊卡讀卡機（未來擴展）
- **現金抽屜**：與列印機連動

---

## 預算估算

### 開發成本

#### Phase 1：Web 版（推薦）
- **前端開發（Vue 3）**：NT$ 120,000 - 150,000
- **UI/UX 設計**：NT$ 30,000 - 50,000
- **測試與優化**：NT$ 15,000 - 25,000
- **總計**：**NT$ 165,000 - 225,000**

#### Phase 2：打包 App（未來擴展）
- **Capacitor 整合**：NT$ 15,000 - 25,000
- **iOS 打包調整**：NT$ 10,000 - 15,000
- **測試與上架**：NT$ 10,000 - 15,000
- **額外總計**：**NT$ 35,000 - 55,000**

**完整方案（Web + App）**：**NT$ 200,000 - 280,000**

### 硬體成本

- **iPad 9 (64GB)**：NT$ 10,900 - 14,900
- **熱感式列印機 x2**（廚房+櫃檯）：NT$ 8,000 - 15,000
- **網路設備**：NT$ 3,000 - 5,000
- **支架與配件**：NT$ 2,000 - 5,000
- **硬體總計**：**NT$ 23,900 - 39,900**

### 額外費用（僅 Phase 2 需要）

**App 打包費用**：
- **Apple Developer 帳號**：NT$ 3,500/年
- **Mac 電腦**（如沒有）：NT$ 30,000 起
- **Google Play 開發者帳號**（可選）：US$25 一次性

**Phase 1 總計**：**NT$ 0**（無額外費用）

### 營運成本（每月）

- **託管費用**：NT$ 0 - 500/月（可選用 Vercel 免費方案）
- **網路費用**：NT$ 500-1,000/月
- **維護費用**：NT$ 3,000-5,000/月（可選）
- **月度總計**：**NT$ 3,500 - 6,500**

**注意**：
- 本地資料庫版本無需資料庫費用
- 僅需定期手動備份到雲端硬碟或 USB

---

## 風險與挑戰

### 技術風險

1. **列印機相容性**
   - 風險：不同列印機協定差異
   - 緩解：選擇支援 ESC/POS 標準的列印機，充分測試

2. **網路穩定性**
   - 風險：夜市環境網路可能不穩定
   - 緩解：本地資料庫版本完全離線運作，不受網路影響

3. **資料備份**
   - 風險：iPad 故障或遺失導致資料丟失
   - 緩解：
     - 每日自動備份到 iCloud / Google Drive
     - 支援手動匯出備份檔案
     - 定期備份到 USB 隨身碟

4. **效能問題**
   - 風險：大量訂單資料導致卡頓
   - 緩解：資料分頁、索引優化

### 營運風險

1. **員工學���成本**
   - 風險：員工不熟悉系統操作
   - 緩解：提供培訓、簡潔的 UI、操作手冊

2. **硬體故障**
   - 風險：iPad 或列印機故障影響營業
   - 緩解：備用設備、快速維修方案

3. **資料安全**
   - 風險：iPad 被竊或資料外洩
   - 緩解：
     - iPad 設定密碼保護
     - 系統啟動時需輸入密碼
     - 定期備份重要資料
     - 敏感資料加密儲存

---

## 後續擴展功能

### Phase 2 功能
- [ ] **多種付款方式**：
  - LINE Pay 整合
  - 街口支付
  - 悠遊卡/一卡通
  - 信用卡讀卡機整合

- [ ] **會員系統**：
  - 會員註冊與積分
  - 會員等級與折扣
  - 儲值卡功能

- [ ] **掃碼點餐**：
  - 顧客掃碼自助點餐
  - 訂單直接同步到廚房

- [ ] **庫存管理**：
  - 即時庫存追蹤
  - 自動扣減庫存
  - 庫存預警

### Phase 3 功能
- [ ] **AI 分析**：
  - 銷售預測
  - 智慧補貨建議
  - 客戶行為分析

- [ ] **LINE 機器人**：
  - 訂單通知
  - 會員服務
  - 行銷推播

- [ ] **財務報表**：
  - 成本分析
  - 利潤分析
  - 稅務報表

---

## 成功指標

### 系統效能指標
- **點餐速度**：完成一筆訂單 < 30 秒
- **結帳速度**：完成結帳 < 20 秒
- **列印速度**：小票列印 < 5 秒
- **系統回應**：介面操作延遲 < 200ms
- **穩定性**：系統當機率 < 0.1%

### 業務影響指標
- **效率提升**：點餐速度提升 50%+
- **錯誤減少**：訂單錯誤率降低 80%+
- **資料準確**：銷售資料 100% 準確
- **成本節省**：人力成本降低 20-30%
- **營業額成長**：透過資料分析提升 10-15%

---

## 附錄

### 參考資源

#### 開發工具

**Vue 生態系**：
- **Vue 3**：https://vuejs.org/
- **Pinia**：https://pinia.vuejs.org/（狀態管理）
- **Vite**：https://vitejs.dev/（建構工具）
- **Vant UI**：https://vant-ui.github.io/vant/#/zh-CN（移動端組件庫）
- **Element Plus**：https://element-plus.org/zh-CN/（桌面端組件庫）
- **VueUse**：https://vueuse.org/（Composition API 工具集）

**通用工具**：
- **IndexedDB Wrapper**：https://github.com/jakearchibald/idb
- **Dexie.js**：https://dexie.org/（IndexedDB 包裝庫）
- **Tailwind CSS**：https://tailwindcss.com/
- **Chart.js / ECharts**：資料視覺化

#### 列印相關
- **ESC/POS 協定**：https://www.epson.com.vn/support/view/esc-pos-
- **node-thermal-printer**：https://github.com/KikeAmat/thermalPrinter
- **Web USB API**：https://developer.mozilla.org/en-US/docs/Web/API/Web_USB_API

#### 設計參考
- **Figma**：https://www.figma.com/
- **Dribbble**：https://dribbble.com/search/pos-system
- **dudoo 肚肚**：https://www.dudooeat.com/

#### POS 系統參考
- **Square POS**：https://squareup.com/
- **Toast POS**：https://pos.toasttab.com/
- **Lightspeed**：https://www.lightspeedhq.com/

### 相關文件
- `UI-DESIGN.md`：UI/UX 設計詳細文件（待建立）
- `DATABASE-SCHEMA.md`：IndexedDB 資料庫架構文件（待建立）
- `BACKUP-GUIDE.md`：資料備份與還原指南（待建立）
- `USER-MANUAL.md`：使用者操作手冊（待建立）
- `VUE3-QUICKSTART.md`：Vue 3 快速開始指南（已完成）
- `VUE-REACT-COMPARISON.md`：Vue vs React 技術選型分析（已完成）
- `CAPACITOR-GUIDE.md`：Capacitor 打包與上架指南（Phase 2 待建立）

---

## 下一步行動

1. **確認需求**：與團隊確認功能優先級
2. **UI 設計**：開始繪製介面原型
3. **硬體採購**：確認列印機型號並下單
4. **建置環境**：初始化 Vue 3 專案
5. **開發團隊**：尋找合適的前端開發者
6. **預算批准**：確認開發預算

---

**文件版本**：v3.7
**建立日期**：2026-01-26
**最後更新**：2026-01-27
**維護者**：Claude Code Assistant
**狀態**：Phase 1 規劃（Vue 3 Web 版本，已確定技術堆疊，原型開發中）

**更新記錄**：
- v3.7 (2026-01-27)：優化觸控響應速度，移除所有按鈕過渡動畫，使用 touchstart 事件消除 300ms 延遲，優化菜單點餐、購物車增減、快速金額按鈕的連續點擊體驗
- v3.6 (2026-01-27)：優化觸控體驗，禁止雙指縮放和雙擊放大，防止誤觸導致畫面縮放，提升 iPad 操作體驗
- v3.5 (2026-01-27)：優化收款功能，快速金額按鈕支援累加模式，新增收全額和歸零按鈕，實收金額限制僅能輸入數字
- v3.4 (2026-01-26)：優化報表顯示，熱銷商品不顯示折扣金額，新增獨立折扣明細區域
- v3.3 (2026-01-26)：優化報表統計，營業額改用原價計算，新增利潤顯示，熱銷商品顯示折扣金額
- v3.2 (2026-01-26)：擴充折扣功能，支援跨品項折扣（單一品項、分類折扣、總數量折扣）
- v3.1 (2026-01-26)：新增折扣優惠功能，買幾串折多少的優惠規則
- v3.0 (2026-01-26)：移除方案選擇，確定使用 Vue 3，專注於 Web 版開發
- v2.1 (2026-01-26)：調整為 Web 優先方案，Phase 1 專注於 Web 版開發
- v2.0 (2026-01-26)：確定採用 Vue 3 + Capacitor 方案，加入 App 打包功能
- v1.1 (2026-01-26)：調整為本地資料庫方案，簡化付款方式為現金，移除折扣功能
- v1.0 (2026-01-26)：初版規劃文件

**技術堆疊確定（Phase 1）**：
- ✅ 前端框架：Vue 3 + TypeScript
- ✅ 狀態管理：Pinia
- ✅ UI 組件庫：Vant 4
- ✅ 本地資料庫：IndexedDB (Dexie.js)
- ✅ 建構工具：Vite 5
- ✅ 部署平台：Vercel / Netlify

**Phase 2 擴展（未來）**：
- ⏳ Capacitor 打包為 iOS App
- ⏳ PWA 漸進式 Web App
- ⏳ 電子付款整合
- ⏳ 會員系統

**聯絡方式**：
如有任何問題或需要進一步討論，請聯絡專案負責人。

**備註**：
本文件為開發規劃，具體實施過程中可能會根據實際需求進行調整。
